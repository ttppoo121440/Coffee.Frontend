(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Product"],{"5a97":function(t,a,e){},"62da":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"container product-details pt-200 mb-100"},[e("Loading",{attrs:{active:t.$store.state.Loading.loading},on:{"update:active":function(a){return t.$set(t.$store.state.Loading,"loading",a)}}}),t.product?e("ProductDetails",{attrs:{data:t.product,quantity:t.quantity},on:{"update:quantity":function(a){t.quantity=a},addCart:t.addCartHandler}}):t._e(),0!==t.$store.state.Product.hotProduct.length?e("HotProduct",{attrs:{"product-data":t.product,data:t.$store.state.Product.hotProduct},on:{qty:t.qty}}):t._e()],1)},n=[],r=(e("7db0"),e("96cf"),e("1da1")),s=e("f01d"),u=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.$store.state.Loading.loading?t._e():e("transition-group",{staticClass:"row",attrs:{name:"page",appear:"",tag:"div"}},[e("Pic",{key:t.$route.name,attrs:{pic:t.data.imageUrl}}),e("div",{key:t.$options.name,staticClass:"col-md-6"},[e("div",{staticClass:"product-details-content"},[e("span",{staticClass:"py-3 text-primary"},[e("router-link",{staticClass:"text-primary",attrs:{to:"/products"}},[t._v(" 產品專區")]),t._v("/"+t._s(t.data.category))],1),e("div",{staticClass:"text-left my-5"},[e("h1",[t._v(" "+t._s(t.data.title)+" ")])]),e("p",[t._v(t._s(t.data.description))])]),e("div",{staticClass:"product-details-function mb-5"},[e("DetailPic",{attrs:{data:t.data,quantity:t.bindingValue},on:{"update:quantity":function(a){t.bindingValue=a}}}),e("AddCart",{attrs:{id:t.productId,quantity:t.bindingValue},on:{addCart:t.addCart}})],1)]),e("div",{key:"img",staticClass:"text-center w-100 py-5"},[e("img",{staticClass:"img-fluid",attrs:{src:"https://hexschool-api.s3.us-west-2.amazonaws.com/custom/0AFndlzAf1G9w0kfYfGpUawNzhoBQ0q54ILC4Z9CSPsXNQw6Iz2DxxD9o115vpMoQUxGyFMKaBbI6ZQhMgmgXfohYg7SWRrVKK9qIgFOknnBt37e1wPN4yAwsXlMnc4c.jpg"}})])],1)},d=[],c=(e("a9e3"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-md-6 my-auto"},[e("div",{staticClass:"product-details-pic"},[e("img",{staticClass:"img-fluid",attrs:{src:t.pic}})])])}),o=[],l={name:"Pic",props:{pic:{type:Array,default:function(){return[]}}}},p=l,h=e("2877"),m=Object(h["a"])(p,c,o,!1,null,null,null),f=m.exports,y=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"product-details-cart text-left mt-5"},[t.checkItem?e("button",{staticClass:"btn",class:{disabled:t.checkItem}},[t._v(" 已加到購物車 ")]):e("button",{staticClass:"btn",class:{disabled:999===t.quantity},on:{click:t.addCart}},[t._v(" 加到購物車 ")])])},g=[],C={name:"AddCart",props:{quantity:{type:Number,required:!0},id:{type:String,required:!0}},computed:{checkItem:function(){var t=this;return this.$store.state.Cart.goodsList.find((function(a){return a.product.id===t.id}))}},methods:{addCart:function(){this.$emit("addCart")}}},b=C,q=Object(h["a"])(b,y,g,!1,null,null,null),v=q.exports,$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"product-details-price mt-5"},[e("span",{staticClass:"mr-5"},[t._v("售價： "+t._s(t.data.price)+" ")]),e("InputNumber",{attrs:{quantity:t.bindingValue,data:t.data},on:{calculation:t.changeValue,changeValue:t.changeValue}})],1)},P=[],_=e("4b4a"),w={name:"DetailPic",components:{InputNumber:_["a"]},props:{data:{type:Object,default:function(){}},quantity:{type:Number,required:!0}},computed:{bindingValue:{get:function(){return this.quantity},set:function(t){this.$emit("update:quantity",t)}}},methods:{setQty:function(t){var a=this;this.$store.state.Cart.goodsList.find((function(e){return e.product.id===t.product.id&&(a.bindingValue=t.quantity),!1}))},changeValue:function(t){this.$store.dispatch("Cart/changeValue",t),this.setQty(t)}}},x=w,V=Object(h["a"])(x,$,P,!1,null,null,null),k=V.exports,I={name:"ProductDetails",components:{Pic:f,AddCart:v,DetailPic:k},props:{data:{type:Object,required:!0},quantity:{type:Number,required:!0}},computed:{productId:function(){var t;return null!==(t=this.data.id)&&void 0!==t?t:""},bindingValue:{get:function(){return this.quantity},set:function(t){this.$emit("update:quantity",t)}}},methods:{addCart:function(){this.$emit("addCart",this.data,this.bindingValue)}}},A=I,L=Object(h["a"])(A,u,d,!1,null,null,null),j=L.exports,D={name:"Product",components:{ProductDetails:j,HotProduct:s["a"]},data:function(){return{quantity:1}},computed:{product:function(){return this.$store.state.Product.product}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$store.commit("Product/CLEAR_DATA"),a.next=3,t.$store.dispatch("Product/getSingleProducts",t.$route.params.id);case 3:return a.next=5,t.$store.dispatch("Product/getHotProduct");case 5:t.getCartId();case 6:case"end":return a.stop()}}),a)})))()},methods:{qty:function(t){0!==t&&(this.quantity=t)},addCart:function(t){this.quantity=2,this.$store.dispatch("Cart/addCart",t)},editCart:function(t){this.quantity+=1,this.$store.dispatch("Cart/editCart",{product:t,quantity:this.quantity})},addCartHandler:function(t){var a=this.$store.state.Cart.goodsList.find((function(a){return a.product.id===t.id}));a?this.editCart(t):this.addCart(t),this.$notify({group:"foo",type:"success",title:"提示",text:"加入購物車成功!"})},getCartId:function(){var t=this,a=this.$store.state.Cart.goodsList.find((function(a){return a.product.id===t.$route.params.id}));this.quantity=a?a.quantity:1}}},O=D,N=(e("bcf8"),Object(h["a"])(O,i,n,!1,null,null,null));a["default"]=N.exports},bcf8:function(t,a,e){"use strict";var i=e("5a97"),n=e.n(i);n.a}}]);